{"ast":null,"code":"// Vendor Service — handles all vendor-specific product operations\nconst BASE_URL = 'http://localhost:8081/api';\nclass VendorService {\n  constructor() {\n    this.currentVendorId = null;\n  }\n  getAuthHeaders() {\n    const token = localStorage.getItem('token');\n    return {\n      'Content-Type': 'application/json',\n      ...(token ? {\n        Authorization: `Bearer ${token}`\n      } : {})\n    };\n  }\n  setCurrentVendor(vendorId) {\n    this.currentVendorId = vendorId;\n  }\n  getCurrentVendorId() {\n    if (this.currentVendorId) return this.currentVendorId;\n    try {\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\n      if ((user === null || user === void 0 ? void 0 : user.role) === 'VENDOR') return user.id;\n    } catch {/* ignore */}\n    return null;\n  }\n  async request(path, options = {}) {\n    const response = await fetch(`${BASE_URL}${path}`, {\n      headers: this.getAuthHeaders(),\n      ...options\n    });\n    if (!response.ok) {\n      let body = '';\n      try {\n        body = await response.text();\n      } catch {/* ignore */}\n      const err = new Error(`HTTP ${response.status}${body ? `: ${body}` : ''}`);\n      err.status = response.status;\n      throw err;\n    }\n    return response.json();\n  }\n  normalizeProduct(p, fallbackVendorId) {\n    var _p$vendor, _p$vendor2, _p$vendor3;\n    return {\n      ...p,\n      vendor: (p === null || p === void 0 ? void 0 : (_p$vendor = p.vendor) === null || _p$vendor === void 0 ? void 0 : _p$vendor.shopName) || (p === null || p === void 0 ? void 0 : (_p$vendor2 = p.vendor) === null || _p$vendor2 === void 0 ? void 0 : _p$vendor2.name) || (p === null || p === void 0 ? void 0 : p.vendor) || 'Unknown Vendor',\n      vendorId: (p === null || p === void 0 ? void 0 : (_p$vendor3 = p.vendor) === null || _p$vendor3 === void 0 ? void 0 : _p$vendor3.id) || (p === null || p === void 0 ? void 0 : p.vendorId) || fallbackVendorId\n    };\n  }\n  async getVendorProfile() {\n    const vendorId = this.getCurrentVendorId();\n    if (!vendorId) throw new Error('Vendor not authenticated');\n    const data = await this.request(`/vendor/${vendorId}`);\n    return (data === null || data === void 0 ? void 0 : data.data) || data;\n  }\n  async getVendorProducts() {\n    const vendorId = this.getCurrentVendorId();\n    if (!vendorId) throw new Error('Vendor not authenticated');\n    const data = await this.request(`/vendor/${vendorId}/products`);\n    const products = Array.isArray(data === null || data === void 0 ? void 0 : data.data) ? data.data : data || [];\n    return products.map(p => this.normalizeProduct(p, vendorId));\n  }\n  async addProduct(productData) {\n    const vendorId = this.getCurrentVendorId();\n    if (!vendorId) throw new Error('Vendor not authenticated');\n    const data = await this.request(`/vendor/${vendorId}/products`, {\n      method: 'POST',\n      body: JSON.stringify(productData)\n    });\n    const product = this.normalizeProduct((data === null || data === void 0 ? void 0 : data.data) || data, vendorId);\n    window.postMessage({\n      type: 'PRODUCT_ADDED',\n      product,\n      vendorId\n    }, '*');\n    return product;\n  }\n  async updateProduct(productId, productData) {\n    const vendorId = this.getCurrentVendorId();\n    if (!vendorId) throw new Error('Vendor not authenticated');\n    const data = await this.request(`/vendor/${vendorId}/products/${productId}`, {\n      method: 'PUT',\n      body: JSON.stringify(productData)\n    });\n    const product = this.normalizeProduct((data === null || data === void 0 ? void 0 : data.data) || data, vendorId);\n    window.postMessage({\n      type: 'PRODUCT_UPDATED',\n      product,\n      vendorId\n    }, '*');\n    return product;\n  }\n  async deleteProduct(productId) {\n    const vendorId = this.getCurrentVendorId();\n    if (!vendorId) throw new Error('Vendor not authenticated');\n    const data = await this.request(`/vendor/${vendorId}/products/${productId}`, {\n      method: 'DELETE'\n    });\n    const product = (data === null || data === void 0 ? void 0 : data.data) || data || {\n      id: productId\n    };\n    window.postMessage({\n      type: 'PRODUCT_DELETED',\n      product,\n      vendorId\n    }, '*');\n    return product;\n  }\n}\nconst vendorService = new VendorService();\nexport default vendorService;","map":{"version":3,"names":["BASE_URL","VendorService","constructor","currentVendorId","getAuthHeaders","token","localStorage","getItem","Authorization","setCurrentVendor","vendorId","getCurrentVendorId","user","JSON","parse","role","id","request","path","options","response","fetch","headers","ok","body","text","err","Error","status","json","normalizeProduct","p","fallbackVendorId","_p$vendor","_p$vendor2","_p$vendor3","vendor","shopName","name","getVendorProfile","data","getVendorProducts","products","Array","isArray","map","addProduct","productData","method","stringify","product","window","postMessage","type","updateProduct","productId","deleteProduct","vendorService"],"sources":["/home/arbinlama/6semProject/Mealbasket/react-frontend/src/services/vendorService.js"],"sourcesContent":["// Vendor Service — handles all vendor-specific product operations\nconst BASE_URL = 'http://localhost:8081/api';\n\nclass VendorService {\n  constructor() {\n    this.currentVendorId = null;\n  }\n\n  getAuthHeaders() {\n    const token = localStorage.getItem('token');\n    return {\n      'Content-Type': 'application/json',\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n    };\n  }\n\n  setCurrentVendor(vendorId) {\n    this.currentVendorId = vendorId;\n  }\n\n  getCurrentVendorId() {\n    if (this.currentVendorId) return this.currentVendorId;\n    try {\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\n      if (user?.role === 'VENDOR') return user.id;\n    } catch { /* ignore */ }\n    return null;\n  }\n\n  async request(path, options = {}) {\n    const response = await fetch(`${BASE_URL}${path}`, {\n      headers: this.getAuthHeaders(),\n      ...options,\n    });\n\n    if (!response.ok) {\n      let body = '';\n      try { body = await response.text(); } catch { /* ignore */ }\n      const err = new Error(`HTTP ${response.status}${body ? `: ${body}` : ''}`);\n      err.status = response.status;\n      throw err;\n    }\n\n    return response.json();\n  }\n\n  normalizeProduct(p, fallbackVendorId) {\n    return {\n      ...p,\n      vendor: p?.vendor?.shopName || p?.vendor?.name || p?.vendor || 'Unknown Vendor',\n      vendorId: p?.vendor?.id || p?.vendorId || fallbackVendorId,\n    };\n  }\n\n  async getVendorProfile() {\n    const vendorId = this.getCurrentVendorId();\n    if (!vendorId) throw new Error('Vendor not authenticated');\n    const data = await this.request(`/vendor/${vendorId}`);\n    return data?.data || data;\n  }\n\n  async getVendorProducts() {\n    const vendorId = this.getCurrentVendorId();\n    if (!vendorId) throw new Error('Vendor not authenticated');\n    const data = await this.request(`/vendor/${vendorId}/products`);\n    const products = Array.isArray(data?.data) ? data.data : data || [];\n    return products.map((p) => this.normalizeProduct(p, vendorId));\n  }\n\n  async addProduct(productData) {\n    const vendorId = this.getCurrentVendorId();\n    if (!vendorId) throw new Error('Vendor not authenticated');\n    const data = await this.request(`/vendor/${vendorId}/products`, {\n      method: 'POST',\n      body: JSON.stringify(productData),\n    });\n    const product = this.normalizeProduct(data?.data || data, vendorId);\n    window.postMessage({ type: 'PRODUCT_ADDED', product, vendorId }, '*');\n    return product;\n  }\n\n  async updateProduct(productId, productData) {\n    const vendorId = this.getCurrentVendorId();\n    if (!vendorId) throw new Error('Vendor not authenticated');\n    const data = await this.request(`/vendor/${vendorId}/products/${productId}`, {\n      method: 'PUT',\n      body: JSON.stringify(productData),\n    });\n    const product = this.normalizeProduct(data?.data || data, vendorId);\n    window.postMessage({ type: 'PRODUCT_UPDATED', product, vendorId }, '*');\n    return product;\n  }\n\n  async deleteProduct(productId) {\n    const vendorId = this.getCurrentVendorId();\n    if (!vendorId) throw new Error('Vendor not authenticated');\n    const data = await this.request(`/vendor/${vendorId}/products/${productId}`, {\n      method: 'DELETE',\n    });\n    const product = data?.data || data || { id: productId };\n    window.postMessage({ type: 'PRODUCT_DELETED', product, vendorId }, '*');\n    return product;\n  }\n}\n\nconst vendorService = new VendorService();\nexport default vendorService;"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAG,2BAA2B;AAE5C,MAAMC,aAAa,CAAC;EAClBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,eAAe,GAAG,IAAI;EAC7B;EAEAC,cAAcA,CAAA,EAAG;IACf,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,OAAO;MACL,cAAc,EAAE,kBAAkB;MAClC,IAAIF,KAAK,GAAG;QAAEG,aAAa,EAAE,UAAUH,KAAK;MAAG,CAAC,GAAG,CAAC,CAAC;IACvD,CAAC;EACH;EAEAI,gBAAgBA,CAACC,QAAQ,EAAE;IACzB,IAAI,CAACP,eAAe,GAAGO,QAAQ;EACjC;EAEAC,kBAAkBA,CAAA,EAAG;IACnB,IAAI,IAAI,CAACR,eAAe,EAAE,OAAO,IAAI,CAACA,eAAe;IACrD,IAAI;MACF,MAAMS,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACR,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;MAC7D,IAAI,CAAAK,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,IAAI,MAAK,QAAQ,EAAE,OAAOH,IAAI,CAACI,EAAE;IAC7C,CAAC,CAAC,MAAM,CAAE;IACV,OAAO,IAAI;EACb;EAEA,MAAMC,OAAOA,CAACC,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;IAChC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGrB,QAAQ,GAAGkB,IAAI,EAAE,EAAE;MACjDI,OAAO,EAAE,IAAI,CAAClB,cAAc,CAAC,CAAC;MAC9B,GAAGe;IACL,CAAC,CAAC;IAEF,IAAI,CAACC,QAAQ,CAACG,EAAE,EAAE;MAChB,IAAIC,IAAI,GAAG,EAAE;MACb,IAAI;QAAEA,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAAE,CAAC,CAAC,MAAM,CAAE;MAC9C,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,QAAQP,QAAQ,CAACQ,MAAM,GAAGJ,IAAI,GAAG,KAAKA,IAAI,EAAE,GAAG,EAAE,EAAE,CAAC;MAC1EE,GAAG,CAACE,MAAM,GAAGR,QAAQ,CAACQ,MAAM;MAC5B,MAAMF,GAAG;IACX;IAEA,OAAON,QAAQ,CAACS,IAAI,CAAC,CAAC;EACxB;EAEAC,gBAAgBA,CAACC,CAAC,EAAEC,gBAAgB,EAAE;IAAA,IAAAC,SAAA,EAAAC,UAAA,EAAAC,UAAA;IACpC,OAAO;MACL,GAAGJ,CAAC;MACJK,MAAM,EAAE,CAAAL,CAAC,aAADA,CAAC,wBAAAE,SAAA,GAADF,CAAC,CAAEK,MAAM,cAAAH,SAAA,uBAATA,SAAA,CAAWI,QAAQ,MAAIN,CAAC,aAADA,CAAC,wBAAAG,UAAA,GAADH,CAAC,CAAEK,MAAM,cAAAF,UAAA,uBAATA,UAAA,CAAWI,IAAI,MAAIP,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEK,MAAM,KAAI,gBAAgB;MAC/E1B,QAAQ,EAAE,CAAAqB,CAAC,aAADA,CAAC,wBAAAI,UAAA,GAADJ,CAAC,CAAEK,MAAM,cAAAD,UAAA,uBAATA,UAAA,CAAWnB,EAAE,MAAIe,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAErB,QAAQ,KAAIsB;IAC5C,CAAC;EACH;EAEA,MAAMO,gBAAgBA,CAAA,EAAG;IACvB,MAAM7B,QAAQ,GAAG,IAAI,CAACC,kBAAkB,CAAC,CAAC;IAC1C,IAAI,CAACD,QAAQ,EAAE,MAAM,IAAIiB,KAAK,CAAC,0BAA0B,CAAC;IAC1D,MAAMa,IAAI,GAAG,MAAM,IAAI,CAACvB,OAAO,CAAC,WAAWP,QAAQ,EAAE,CAAC;IACtD,OAAO,CAAA8B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,KAAIA,IAAI;EAC3B;EAEA,MAAMC,iBAAiBA,CAAA,EAAG;IACxB,MAAM/B,QAAQ,GAAG,IAAI,CAACC,kBAAkB,CAAC,CAAC;IAC1C,IAAI,CAACD,QAAQ,EAAE,MAAM,IAAIiB,KAAK,CAAC,0BAA0B,CAAC;IAC1D,MAAMa,IAAI,GAAG,MAAM,IAAI,CAACvB,OAAO,CAAC,WAAWP,QAAQ,WAAW,CAAC;IAC/D,MAAMgC,QAAQ,GAAGC,KAAK,CAACC,OAAO,CAACJ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,CAAC,GAAGA,IAAI,CAACA,IAAI,GAAGA,IAAI,IAAI,EAAE;IACnE,OAAOE,QAAQ,CAACG,GAAG,CAAEd,CAAC,IAAK,IAAI,CAACD,gBAAgB,CAACC,CAAC,EAAErB,QAAQ,CAAC,CAAC;EAChE;EAEA,MAAMoC,UAAUA,CAACC,WAAW,EAAE;IAC5B,MAAMrC,QAAQ,GAAG,IAAI,CAACC,kBAAkB,CAAC,CAAC;IAC1C,IAAI,CAACD,QAAQ,EAAE,MAAM,IAAIiB,KAAK,CAAC,0BAA0B,CAAC;IAC1D,MAAMa,IAAI,GAAG,MAAM,IAAI,CAACvB,OAAO,CAAC,WAAWP,QAAQ,WAAW,EAAE;MAC9DsC,MAAM,EAAE,MAAM;MACdxB,IAAI,EAAEX,IAAI,CAACoC,SAAS,CAACF,WAAW;IAClC,CAAC,CAAC;IACF,MAAMG,OAAO,GAAG,IAAI,CAACpB,gBAAgB,CAAC,CAAAU,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,KAAIA,IAAI,EAAE9B,QAAQ,CAAC;IACnEyC,MAAM,CAACC,WAAW,CAAC;MAAEC,IAAI,EAAE,eAAe;MAAEH,OAAO;MAAExC;IAAS,CAAC,EAAE,GAAG,CAAC;IACrE,OAAOwC,OAAO;EAChB;EAEA,MAAMI,aAAaA,CAACC,SAAS,EAAER,WAAW,EAAE;IAC1C,MAAMrC,QAAQ,GAAG,IAAI,CAACC,kBAAkB,CAAC,CAAC;IAC1C,IAAI,CAACD,QAAQ,EAAE,MAAM,IAAIiB,KAAK,CAAC,0BAA0B,CAAC;IAC1D,MAAMa,IAAI,GAAG,MAAM,IAAI,CAACvB,OAAO,CAAC,WAAWP,QAAQ,aAAa6C,SAAS,EAAE,EAAE;MAC3EP,MAAM,EAAE,KAAK;MACbxB,IAAI,EAAEX,IAAI,CAACoC,SAAS,CAACF,WAAW;IAClC,CAAC,CAAC;IACF,MAAMG,OAAO,GAAG,IAAI,CAACpB,gBAAgB,CAAC,CAAAU,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,KAAIA,IAAI,EAAE9B,QAAQ,CAAC;IACnEyC,MAAM,CAACC,WAAW,CAAC;MAAEC,IAAI,EAAE,iBAAiB;MAAEH,OAAO;MAAExC;IAAS,CAAC,EAAE,GAAG,CAAC;IACvE,OAAOwC,OAAO;EAChB;EAEA,MAAMM,aAAaA,CAACD,SAAS,EAAE;IAC7B,MAAM7C,QAAQ,GAAG,IAAI,CAACC,kBAAkB,CAAC,CAAC;IAC1C,IAAI,CAACD,QAAQ,EAAE,MAAM,IAAIiB,KAAK,CAAC,0BAA0B,CAAC;IAC1D,MAAMa,IAAI,GAAG,MAAM,IAAI,CAACvB,OAAO,CAAC,WAAWP,QAAQ,aAAa6C,SAAS,EAAE,EAAE;MAC3EP,MAAM,EAAE;IACV,CAAC,CAAC;IACF,MAAME,OAAO,GAAG,CAAAV,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,KAAIA,IAAI,IAAI;MAAExB,EAAE,EAAEuC;IAAU,CAAC;IACvDJ,MAAM,CAACC,WAAW,CAAC;MAAEC,IAAI,EAAE,iBAAiB;MAAEH,OAAO;MAAExC;IAAS,CAAC,EAAE,GAAG,CAAC;IACvE,OAAOwC,OAAO;EAChB;AACF;AAEA,MAAMO,aAAa,GAAG,IAAIxD,aAAa,CAAC,CAAC;AACzC,eAAewD,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}