{"ast":null,"code":"import _objectSpread from\"/home/arbinlama/6semProject/Mealbasket1/react-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer,useEffect}from'react';import{authAPI}from'../services/api';// ── Initial State ──────────────────────────────────────────────────────────────\nimport{jsx as _jsx}from\"react/jsx-runtime\";const initialState={user:null,token:localStorage.getItem('token')||null,isAuthenticated:false,loading:true,error:null,role:null};// ── Action Types ───────────────────────────────────────────────────────────────\nconst AUTH_ACTIONS={LOGIN_START:'LOGIN_START',LOGIN_SUCCESS:'LOGIN_SUCCESS',LOGIN_FAILURE:'LOGIN_FAILURE',REGISTER_START:'REGISTER_START',REGISTER_SUCCESS:'REGISTER_SUCCESS',REGISTER_FAILURE:'REGISTER_FAILURE',LOGOUT:'LOGOUT',LOAD_USER:'LOAD_USER',CLEAR_ERROR:'CLEAR_ERROR'};// ── Reducer ────────────────────────────────────────────────────────────────────\nconst authReducer=(state,action)=>{var _action$payload$user,_action$payload;switch(action.type){case AUTH_ACTIONS.LOGIN_START:case AUTH_ACTIONS.REGISTER_START:return _objectSpread(_objectSpread({},state),{},{loading:true,error:null});case AUTH_ACTIONS.LOGIN_SUCCESS:return _objectSpread(_objectSpread({},state),{},{loading:false,isAuthenticated:true,user:action.payload.user,token:action.payload.token,role:((_action$payload$user=action.payload.user)===null||_action$payload$user===void 0?void 0:_action$payload$user.role)||'USER',error:null});case AUTH_ACTIONS.LOGIN_FAILURE:return _objectSpread(_objectSpread({},state),{},{loading:false,isAuthenticated:false,user:null,token:null,role:null,error:action.payload});case AUTH_ACTIONS.REGISTER_SUCCESS:return _objectSpread(_objectSpread({},state),{},{loading:false,error:null});case AUTH_ACTIONS.REGISTER_FAILURE:return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload});case AUTH_ACTIONS.LOGOUT:return _objectSpread(_objectSpread({},state),{},{user:null,token:null,isAuthenticated:false,role:null,loading:false,error:null});case AUTH_ACTIONS.LOAD_USER:return _objectSpread(_objectSpread({},state),{},{user:action.payload,isAuthenticated:true,role:((_action$payload=action.payload)===null||_action$payload===void 0?void 0:_action$payload.role)||'USER',loading:false});case AUTH_ACTIONS.CLEAR_ERROR:return _objectSpread(_objectSpread({},state),{},{error:null});default:return _objectSpread(_objectSpread({},state),{},{loading:false});}};// ── Context ────────────────────────────────────────────────────────────────────\nconst AuthContext=/*#__PURE__*/createContext(null);// ── Provider ───────────────────────────────────────────────────────────────────\nexport const AuthProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(authReducer,initialState);// Load user from backend on mount using token\nuseEffect(()=>{const token=localStorage.getItem('token');if(token){// Verify token with backend and get current user\nauthAPI.getProfile().then(response=>{if(response.data.success){const user=response.data.data;dispatch({type:AUTH_ACTIONS.LOAD_USER,payload:user});}else{// Token invalid, clear it\nlocalStorage.removeItem('token');dispatch({type:AUTH_ACTIONS.LOGOUT});}}).catch(error=>{console.error('Failed to load user profile:',error);// Backend error, clear token and set to logged out state\nlocalStorage.removeItem('token');dispatch({type:AUTH_ACTIONS.LOGOUT});});}else{// No token, set to logged out state\ndispatch({type:AUTH_ACTIONS.LOGOUT});}},[]);// ── Login ────────────────────────────────────────────────────────────────────\nconst login=async credentials=>{try{dispatch({type:AUTH_ACTIONS.LOGIN_START});const response=await authAPI.login(credentials);if(response.data.success){const loginResponse=response.data.data;const user={id:loginResponse.id,email:loginResponse.email,name:loginResponse.name,role:loginResponse.role};const token=loginResponse.token;// Only store token in localStorage\nlocalStorage.setItem('token',token);dispatch({type:AUTH_ACTIONS.LOGIN_SUCCESS,payload:{user,token}});return{success:true,user,token};}else{throw new Error(response.data.message||'Login failed');}}catch(error){var _error$response,_error$response2,_error$response3,_error$response3$data;let errorMessage='Login failed';if(error.code==='ECONNREFUSED'||error.code==='ERR_NETWORK'){errorMessage='Cannot connect to server. Please check if the backend is running.';}else if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){errorMessage='Invalid email or password.';}else if(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===500){errorMessage='Server error. Please try again later.';}else if((_error$response3=error.response)!==null&&_error$response3!==void 0&&(_error$response3$data=_error$response3.data)!==null&&_error$response3$data!==void 0&&_error$response3$data.message){errorMessage=error.response.data.message;}else if(error.message){errorMessage=error.message;}dispatch({type:AUTH_ACTIONS.LOGIN_FAILURE,payload:errorMessage});return{success:false,error:errorMessage};}};// ── Register ─────────────────────────────────────────────────────────────────\nconst register=async userData=>{try{dispatch({type:AUTH_ACTIONS.REGISTER_START});const response=await authAPI.register(userData);if(response.data.success){dispatch({type:AUTH_ACTIONS.REGISTER_SUCCESS});return{success:true};}else{throw new Error(response.data.message||'Registration failed');}}catch(error){var _error$response4,_error$response4$data;const errorMessage=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||error.message||'Registration failed';dispatch({type:AUTH_ACTIONS.REGISTER_FAILURE,payload:errorMessage});return{success:false,error:errorMessage};}};// ── Logout ───────────────────────────────────────────────────────────────────\nconst logout=async()=>{try{await authAPI.logout();}catch(_unused){// Swallow logout API errors — still clear local state\n}finally{// Only clear token from localStorage\nlocalStorage.removeItem('token');dispatch({type:AUTH_ACTIONS.LOGOUT});window.location.href='/login';}};// ── Clear Error ──────────────────────────────────────────────────────────────\nconst clearError=()=>dispatch({type:AUTH_ACTIONS.CLEAR_ERROR});const value={user:state.user,token:state.token,isAuthenticated:state.isAuthenticated,loading:state.loading,error:state.error,role:state.role,login,register,logout,clearError};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};// ── Hook ───────────────────────────────────────────────────────────────────────\nexport const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};export default AuthContext;","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","authAPI","jsx","_jsx","initialState","user","token","localStorage","getItem","isAuthenticated","loading","error","role","AUTH_ACTIONS","LOGIN_START","LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER_START","REGISTER_SUCCESS","REGISTER_FAILURE","LOGOUT","LOAD_USER","CLEAR_ERROR","authReducer","state","action","_action$payload$user","_action$payload","type","_objectSpread","payload","AuthContext","AuthProvider","_ref","children","dispatch","getProfile","then","response","data","success","removeItem","catch","console","login","credentials","loginResponse","id","email","name","setItem","Error","message","_error$response","_error$response2","_error$response3","_error$response3$data","errorMessage","code","status","register","userData","_error$response4","_error$response4$data","logout","_unused","window","location","href","clearError","value","Provider","useAuth","context"],"sources":["/home/arbinlama/6semProject/Mealbasket1/react-frontend/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { authAPI } from '../services/api';\n\n// ── Initial State ──────────────────────────────────────────────────────────────\nconst initialState = {\n  user: null,\n  token: localStorage.getItem('token') || null,\n  isAuthenticated: false,\n  loading: true,\n  error: null,\n  role: null,\n};\n\n// ── Action Types ───────────────────────────────────────────────────────────────\nconst AUTH_ACTIONS = {\n  LOGIN_START: 'LOGIN_START',\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\n  LOGIN_FAILURE: 'LOGIN_FAILURE',\n  REGISTER_START: 'REGISTER_START',\n  REGISTER_SUCCESS: 'REGISTER_SUCCESS',\n  REGISTER_FAILURE: 'REGISTER_FAILURE',\n  LOGOUT: 'LOGOUT',\n  LOAD_USER: 'LOAD_USER',\n  CLEAR_ERROR: 'CLEAR_ERROR',\n};\n\n// ── Reducer ────────────────────────────────────────────────────────────────────\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case AUTH_ACTIONS.LOGIN_START:\n    case AUTH_ACTIONS.REGISTER_START:\n      return { ...state, loading: true, error: null };\n\n    case AUTH_ACTIONS.LOGIN_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        isAuthenticated: true,\n        user: action.payload.user,\n        token: action.payload.token,\n        role: action.payload.user?.role || 'USER',\n        error: null,\n      };\n\n    case AUTH_ACTIONS.LOGIN_FAILURE:\n      return {\n        ...state,\n        loading: false,\n        isAuthenticated: false,\n        user: null,\n        token: null,\n        role: null,\n        error: action.payload,\n      };\n\n    case AUTH_ACTIONS.REGISTER_SUCCESS:\n      return { ...state, loading: false, error: null };\n\n    case AUTH_ACTIONS.REGISTER_FAILURE:\n      return { ...state, loading: false, error: action.payload };\n\n    case AUTH_ACTIONS.LOGOUT:\n      return {\n        ...state,\n        user: null,\n        token: null,\n        isAuthenticated: false,\n        role: null,\n        loading: false,\n        error: null,\n      };\n\n    case AUTH_ACTIONS.LOAD_USER:\n      return {\n        ...state,\n        user: action.payload,\n        isAuthenticated: true,\n        role: action.payload?.role || 'USER',\n        loading: false,\n      };\n\n    case AUTH_ACTIONS.CLEAR_ERROR:\n      return { ...state, error: null };\n\n    default:\n      return { ...state, loading: false };\n  }\n};\n\n// ── Context ────────────────────────────────────────────────────────────────────\nconst AuthContext = createContext(null);\n\n// ── Provider ───────────────────────────────────────────────────────────────────\nexport const AuthProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  // Load user from backend on mount using token\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      // Verify token with backend and get current user\n      authAPI.getProfile()\n        .then(response => {\n          if (response.data.success) {\n            const user = response.data.data;\n            dispatch({ type: AUTH_ACTIONS.LOAD_USER, payload: user });\n          } else {\n            // Token invalid, clear it\n            localStorage.removeItem('token');\n            dispatch({ type: AUTH_ACTIONS.LOGOUT });\n          }\n        })\n        .catch((error) => {\n          console.error('Failed to load user profile:', error);\n          // Backend error, clear token and set to logged out state\n          localStorage.removeItem('token');\n          dispatch({ type: AUTH_ACTIONS.LOGOUT });\n        });\n    } else {\n      // No token, set to logged out state\n      dispatch({ type: AUTH_ACTIONS.LOGOUT });\n    }\n  }, []);\n\n  // ── Login ────────────────────────────────────────────────────────────────────\n  const login = async (credentials) => {\n    try {\n      dispatch({ type: AUTH_ACTIONS.LOGIN_START });\n      const response = await authAPI.login(credentials);\n\n      if (response.data.success) {\n        const loginResponse = response.data.data;\n        const user = {\n          id: loginResponse.id,\n          email: loginResponse.email,\n          name: loginResponse.name,\n          role: loginResponse.role,\n        };\n        const token = loginResponse.token;\n\n        // Only store token in localStorage\n        localStorage.setItem('token', token);\n\n        dispatch({ type: AUTH_ACTIONS.LOGIN_SUCCESS, payload: { user, token } });\n        return { success: true, user, token };\n      } else {\n        throw new Error(response.data.message || 'Login failed');\n      }\n    } catch (error) {\n      let errorMessage = 'Login failed';\n      if (error.code === 'ECONNREFUSED' || error.code === 'ERR_NETWORK') {\n        errorMessage = 'Cannot connect to server. Please check if the backend is running.';\n      } else if (error.response?.status === 401) {\n        errorMessage = 'Invalid email or password.';\n      } else if (error.response?.status === 500) {\n        errorMessage = 'Server error. Please try again later.';\n      } else if (error.response?.data?.message) {\n        errorMessage = error.response.data.message;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n\n      dispatch({ type: AUTH_ACTIONS.LOGIN_FAILURE, payload: errorMessage });\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  // ── Register ─────────────────────────────────────────────────────────────────\n  const register = async (userData) => {\n    try {\n      dispatch({ type: AUTH_ACTIONS.REGISTER_START });\n      const response = await authAPI.register(userData);\n\n      if (response.data.success) {\n        dispatch({ type: AUTH_ACTIONS.REGISTER_SUCCESS });\n        return { success: true };\n      } else {\n        throw new Error(response.data.message || 'Registration failed');\n      }\n    } catch (error) {\n      const errorMessage =\n        error.response?.data?.message || error.message || 'Registration failed';\n      dispatch({ type: AUTH_ACTIONS.REGISTER_FAILURE, payload: errorMessage });\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  // ── Logout ───────────────────────────────────────────────────────────────────\n  const logout = async () => {\n    try {\n      await authAPI.logout();\n    } catch {\n      // Swallow logout API errors — still clear local state\n    } finally {\n      // Only clear token from localStorage\n      localStorage.removeItem('token');\n      dispatch({ type: AUTH_ACTIONS.LOGOUT });\n      window.location.href = '/login';\n    }\n  };\n\n  // ── Clear Error ──────────────────────────────────────────────────────────────\n  const clearError = () => dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\n\n  const value = {\n    user: state.user,\n    token: state.token,\n    isAuthenticated: state.isAuthenticated,\n    loading: state.loading,\n    error: state.error,\n    role: state.role,\n    login,\n    register,\n    logout,\n    clearError,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\n// ── Hook ───────────────────────────────────────────────────────────────────────\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport default AuthContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}