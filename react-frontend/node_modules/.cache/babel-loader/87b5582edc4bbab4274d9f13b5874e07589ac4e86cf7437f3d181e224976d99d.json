{"ast":null,"code":"// Admin Service for backend API integration\nclass AdminService{constructor(){this.baseURL='http://localhost:8081/api/admin';this.productsURL='http://localhost:8081/api/products';}// Get authentication headers\ngetAuthHeaders(){const token=localStorage.getItem('token');return{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)};}// Get all users and vendors from backend\nasync getAllUsers(){try{console.log('AdminService: Fetching all users from backend...');const response=await fetch(\"\".concat(this.baseURL,\"/users\"),{method:'GET',headers:this.getAuthHeaders()});if(!response.ok){let bodyText='';try{bodyText=await response.text();}catch(e){bodyText='';}const msg=\"HTTP \".concat(response.status,\" \").concat(response.statusText).concat(bodyText?\" - \".concat(bodyText):'');const err=new Error(msg);err.status=response.status;throw err;}const data=await response.json();console.log('AdminService: Successfully fetched users:',data);return data;}catch(error){console.error('AdminService: Error fetching users:',error);throw error;}}// Get all vendors specifically\nasync getAllVendors(){try{console.log('AdminService: Fetching all vendors from backend...');const response=await fetch(\"\".concat(this.baseURL,\"/vendors\"),{method:'GET',headers:this.getAuthHeaders()});if(!response.ok){let bodyText='';try{bodyText=await response.text();}catch(e){bodyText='';}const msg=\"HTTP \".concat(response.status,\" \").concat(response.statusText).concat(bodyText?\" - \".concat(bodyText):'');const err=new Error(msg);err.status=response.status;throw err;}const data=await response.json();console.log('AdminService: Successfully fetched vendors:',data);return data;}catch(error){console.error('AdminService: Error fetching vendors:',error);throw error;}}// Get dashboard statistics\nasync getDashboardStats(){try{console.log('AdminService: Fetching dashboard stats from backend...');const response=await fetch(\"\".concat(this.baseURL,\"/stats\"),{method:'GET',headers:this.getAuthHeaders()});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();console.log('AdminService: Successfully fetched stats:',data);return data;}catch(error){console.error('AdminService: Error fetching stats:',error);throw error;}}// Get all products from all vendors\nasync getAllProducts(){try{console.log('AdminService: Fetching all products from backend...');const response=await fetch(\"\".concat(this.productsURL),{method:'GET',headers:{'Content-Type':'application/json'}});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();console.log('AdminService: Successfully fetched products:',data);return data;}catch(error){console.error('AdminService: Error fetching products:',error);throw error;}}// Delete a user\nasync deleteUser(userId){try{console.log('AdminService: Deleting user:',userId);const response=await fetch(\"\".concat(this.baseURL,\"/users/\").concat(userId),{method:'DELETE',headers:this.getAuthHeaders()});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();console.log('AdminService: Successfully deleted user:',data);return data;}catch(error){console.error('AdminService: Error deleting user:',error);throw error;}}// Update user role\nasync updateUserRole(userId,newRole){try{console.log('AdminService: Updating user role:',userId,newRole);const response=await fetch(\"\".concat(this.baseURL,\"/users/\").concat(userId,\"/role\"),{method:'PUT',headers:this.getAuthHeaders(),body:JSON.stringify({role:newRole})});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();console.log('AdminService: Successfully updated user role:',data);return data;}catch(error){console.error('AdminService: Error updating user role:',error);throw error;}}// Fallback to localStorage if backend is not available\nasync getUsersFromFallback(){console.log('AdminService: Using localStorage fallback for users...');const allUsers=JSON.parse(localStorage.getItem('allUsers')||'[]');return allUsers;}}export default new AdminService();","map":{"version":3,"names":["AdminService","constructor","baseURL","productsURL","getAuthHeaders","token","localStorage","getItem","concat","getAllUsers","console","log","response","fetch","method","headers","ok","bodyText","text","e","msg","status","statusText","err","Error","data","json","error","getAllVendors","getDashboardStats","getAllProducts","deleteUser","userId","updateUserRole","newRole","body","JSON","stringify","role","getUsersFromFallback","allUsers","parse"],"sources":["/home/arbinlama/6semProject/Mealbasket1/react-frontend/src/services/adminService.js"],"sourcesContent":["// Admin Service for backend API integration\nclass AdminService {\n  constructor() {\n    this.baseURL = 'http://localhost:8081/api/admin';\n    this.productsURL = 'http://localhost:8081/api/products';\n  }\n\n  // Get authentication headers\n  getAuthHeaders() {\n    const token = localStorage.getItem('token');\n    return {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    };\n  }\n\n  // Get all users and vendors from backend\n  async getAllUsers() {\n    try {\n      console.log('AdminService: Fetching all users from backend...');\n      const response = await fetch(`${this.baseURL}/users`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n\n      if (!response.ok) {\n        let bodyText = '';\n        try {\n          bodyText = await response.text();\n        } catch (e) {\n          bodyText = '';\n        }\n        const msg = `HTTP ${response.status} ${response.statusText}${bodyText ? ` - ${bodyText}` : ''}`;\n        const err = new Error(msg);\n        err.status = response.status;\n        throw err;\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched users:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching users:', error);\n      throw error;\n    }\n  }\n\n  // Get all vendors specifically\n  async getAllVendors() {\n    try {\n      console.log('AdminService: Fetching all vendors from backend...');\n      const response = await fetch(`${this.baseURL}/vendors`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n\n      if (!response.ok) {\n        let bodyText = '';\n        try {\n          bodyText = await response.text();\n        } catch (e) {\n          bodyText = '';\n        }\n        const msg = `HTTP ${response.status} ${response.statusText}${bodyText ? ` - ${bodyText}` : ''}`;\n        const err = new Error(msg);\n        err.status = response.status;\n        throw err;\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched vendors:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching vendors:', error);\n      throw error;\n    }\n  }\n\n  // Get dashboard statistics\n  async getDashboardStats() {\n    try {\n      console.log('AdminService: Fetching dashboard stats from backend...');\n      const response = await fetch(`${this.baseURL}/stats`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched stats:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching stats:', error);\n      throw error;\n    }\n  }\n\n  // Get all products from all vendors\n  async getAllProducts() {\n    try {\n      console.log('AdminService: Fetching all products from backend...');\n      const response = await fetch(`${this.productsURL}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched products:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching products:', error);\n      throw error;\n    }\n  }\n\n  // Delete a user\n  async deleteUser(userId) {\n    try {\n      console.log('AdminService: Deleting user:', userId);\n      const response = await fetch(`${this.baseURL}/users/${userId}`, {\n        method: 'DELETE',\n        headers: this.getAuthHeaders()\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully deleted user:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error deleting user:', error);\n      throw error;\n    }\n  }\n\n  // Update user role\n  async updateUserRole(userId, newRole) {\n    try {\n      console.log('AdminService: Updating user role:', userId, newRole);\n      const response = await fetch(`${this.baseURL}/users/${userId}/role`, {\n        method: 'PUT',\n        headers: this.getAuthHeaders(),\n        body: JSON.stringify({ role: newRole })\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully updated user role:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error updating user role:', error);\n      throw error;\n    }\n  }\n\n  // Fallback to localStorage if backend is not available\n  async getUsersFromFallback() {\n    console.log('AdminService: Using localStorage fallback for users...');\n    const allUsers = JSON.parse(localStorage.getItem('allUsers') || '[]');\n    return allUsers;\n  }\n}\n\nexport default new AdminService();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}