{"ast":null,"code":"// Admin Service — handles all admin API calls with proper error handling\nconst BASE_URL = 'http://localhost:8081/api';\nclass AdminService {\n  getAuthHeaders() {\n    const token = localStorage.getItem('token');\n    return {\n      'Content-Type': 'application/json',\n      ...(token ? {\n        Authorization: `Bearer ${token}`\n      } : {})\n    };\n  }\n  async request(path, options = {}) {\n    const response = await fetch(`${BASE_URL}${path}`, {\n      headers: this.getAuthHeaders(),\n      ...options\n    });\n    if (!response.ok) {\n      let body = '';\n      try {\n        body = await response.text();\n      } catch {/* ignore */}\n      const err = new Error(`HTTP ${response.status}${body ? `: ${body}` : ''}`);\n      err.status = response.status;\n      throw err;\n    }\n    return response.json();\n  }\n  getAllUsers() {\n    return this.request('/admin/users');\n  }\n  getAllVendors() {\n    return this.request('/admin/vendors');\n  }\n  getAllProducts() {\n    return this.request('/products');\n  }\n  deleteUser(userId) {\n    return this.request(`/admin/users/${userId}`, {\n      method: 'DELETE'\n    });\n  }\n  updateUserRole(userId, newRole) {\n    return this.request(`/admin/users/${userId}/role`, {\n      method: 'PUT',\n      body: JSON.stringify({\n        role: newRole\n      })\n    });\n  }\n\n  // LocalStorage fallback when backend is unreachable\n  getUsersFromFallback() {\n    return JSON.parse(localStorage.getItem('allUsers') || '[]');\n  }\n}\nexport default new AdminService();","map":{"version":3,"names":["BASE_URL","AdminService","getAuthHeaders","token","localStorage","getItem","Authorization","request","path","options","response","fetch","headers","ok","body","text","err","Error","status","json","getAllUsers","getAllVendors","getAllProducts","deleteUser","userId","method","updateUserRole","newRole","JSON","stringify","role","getUsersFromFallback","parse"],"sources":["/home/arbinlama/6semProject/Mealbasket/react-frontend/src/services/adminService.js"],"sourcesContent":["// Admin Service — handles all admin API calls with proper error handling\nconst BASE_URL = 'http://localhost:8081/api';\n\nclass AdminService {\n  getAuthHeaders() {\n    const token = localStorage.getItem('token');\n    return {\n      'Content-Type': 'application/json',\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n    };\n  }\n\n  async request(path, options = {}) {\n    const response = await fetch(`${BASE_URL}${path}`, {\n      headers: this.getAuthHeaders(),\n      ...options,\n    });\n\n    if (!response.ok) {\n      let body = '';\n      try { body = await response.text(); } catch { /* ignore */ }\n      const err = new Error(`HTTP ${response.status}${body ? `: ${body}` : ''}`);\n      err.status = response.status;\n      throw err;\n    }\n\n    return response.json();\n  }\n\n  getAllUsers() {\n    return this.request('/admin/users');\n  }\n\n  getAllVendors() {\n    return this.request('/admin/vendors');\n  }\n\n  getAllProducts() {\n    return this.request('/products');\n  }\n\n  deleteUser(userId) {\n    return this.request(`/admin/users/${userId}`, { method: 'DELETE' });\n  }\n\n  updateUserRole(userId, newRole) {\n    return this.request(`/admin/users/${userId}/role`, {\n      method: 'PUT',\n      body: JSON.stringify({ role: newRole }),\n    });\n  }\n\n  // LocalStorage fallback when backend is unreachable\n  getUsersFromFallback() {\n    return JSON.parse(localStorage.getItem('allUsers') || '[]');\n  }\n}\n\nexport default new AdminService();"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAG,2BAA2B;AAE5C,MAAMC,YAAY,CAAC;EACjBC,cAAcA,CAAA,EAAG;IACf,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,OAAO;MACL,cAAc,EAAE,kBAAkB;MAClC,IAAIF,KAAK,GAAG;QAAEG,aAAa,EAAE,UAAUH,KAAK;MAAG,CAAC,GAAG,CAAC,CAAC;IACvD,CAAC;EACH;EAEA,MAAMI,OAAOA,CAACC,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;IAChC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGX,QAAQ,GAAGQ,IAAI,EAAE,EAAE;MACjDI,OAAO,EAAE,IAAI,CAACV,cAAc,CAAC,CAAC;MAC9B,GAAGO;IACL,CAAC,CAAC;IAEF,IAAI,CAACC,QAAQ,CAACG,EAAE,EAAE;MAChB,IAAIC,IAAI,GAAG,EAAE;MACb,IAAI;QAAEA,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAAE,CAAC,CAAC,MAAM,CAAE;MAC9C,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,QAAQP,QAAQ,CAACQ,MAAM,GAAGJ,IAAI,GAAG,KAAKA,IAAI,EAAE,GAAG,EAAE,EAAE,CAAC;MAC1EE,GAAG,CAACE,MAAM,GAAGR,QAAQ,CAACQ,MAAM;MAC5B,MAAMF,GAAG;IACX;IAEA,OAAON,QAAQ,CAACS,IAAI,CAAC,CAAC;EACxB;EAEAC,WAAWA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACb,OAAO,CAAC,cAAc,CAAC;EACrC;EAEAc,aAAaA,CAAA,EAAG;IACd,OAAO,IAAI,CAACd,OAAO,CAAC,gBAAgB,CAAC;EACvC;EAEAe,cAAcA,CAAA,EAAG;IACf,OAAO,IAAI,CAACf,OAAO,CAAC,WAAW,CAAC;EAClC;EAEAgB,UAAUA,CAACC,MAAM,EAAE;IACjB,OAAO,IAAI,CAACjB,OAAO,CAAC,gBAAgBiB,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE;IAAS,CAAC,CAAC;EACrE;EAEAC,cAAcA,CAACF,MAAM,EAAEG,OAAO,EAAE;IAC9B,OAAO,IAAI,CAACpB,OAAO,CAAC,gBAAgBiB,MAAM,OAAO,EAAE;MACjDC,MAAM,EAAE,KAAK;MACbX,IAAI,EAAEc,IAAI,CAACC,SAAS,CAAC;QAAEC,IAAI,EAAEH;MAAQ,CAAC;IACxC,CAAC,CAAC;EACJ;;EAEA;EACAI,oBAAoBA,CAAA,EAAG;IACrB,OAAOH,IAAI,CAACI,KAAK,CAAC5B,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC;EAC7D;AACF;AAEA,eAAe,IAAIJ,YAAY,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}