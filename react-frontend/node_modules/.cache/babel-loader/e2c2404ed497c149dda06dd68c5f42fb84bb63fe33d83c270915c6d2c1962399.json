{"ast":null,"code":"// Admin Service for backend API integration\nclass AdminService {\n  constructor() {\n    this.baseURL = 'http://localhost:8081/api/admin';\n    this.productsURL = 'http://localhost:8081/api/products';\n  }\n\n  // Get authentication headers\n  getAuthHeaders() {\n    const token = localStorage.getItem('token');\n    return {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    };\n  }\n\n  // Get all users and vendors from backend\n  async getAllUsers() {\n    try {\n      console.log('AdminService: Fetching all users from backend...');\n      const response = await fetch(`${this.baseURL}/users`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n      if (!response.ok) {\n        let bodyText = '';\n        try {\n          bodyText = await response.text();\n        } catch (e) {\n          bodyText = '';\n        }\n        const msg = `HTTP ${response.status} ${response.statusText}${bodyText ? ` - ${bodyText}` : ''}`;\n        const err = new Error(msg);\n        err.status = response.status;\n        throw err;\n      }\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched users:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching users:', error);\n      throw error;\n    }\n  }\n\n  // Get all vendors specifically\n  async getAllVendors() {\n    try {\n      console.log('AdminService: Fetching all vendors from backend...');\n      const response = await fetch(`${this.baseURL}/vendors`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n      if (!response.ok) {\n        let bodyText = '';\n        try {\n          bodyText = await response.text();\n        } catch (e) {\n          bodyText = '';\n        }\n        const msg = `HTTP ${response.status} ${response.statusText}${bodyText ? ` - ${bodyText}` : ''}`;\n        const err = new Error(msg);\n        err.status = response.status;\n        throw err;\n      }\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched vendors:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching vendors:', error);\n      throw error;\n    }\n  }\n\n  // Get dashboard statistics\n  async getDashboardStats() {\n    try {\n      console.log('AdminService: Fetching dashboard stats from backend...');\n      const response = await fetch(`${this.baseURL}/stats`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched stats:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching stats:', error);\n      throw error;\n    }\n  }\n\n  // Get all products from all vendors\n  async getAllProducts() {\n    try {\n      console.log('AdminService: Fetching all products from backend...');\n      const response = await fetch(`${this.productsURL}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched products:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching products:', error);\n      throw error;\n    }\n  }\n\n  // Delete a user\n  async deleteUser(userId) {\n    try {\n      console.log('AdminService: Deleting user:', userId);\n      const response = await fetch(`${this.baseURL}/users/${userId}`, {\n        method: 'DELETE',\n        headers: this.getAuthHeaders()\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('AdminService: Successfully deleted user:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error deleting user:', error);\n      throw error;\n    }\n  }\n\n  // Update user role\n  async updateUserRole(userId, newRole) {\n    try {\n      console.log('AdminService: Updating user role:', userId, newRole);\n      const response = await fetch(`${this.baseURL}/users/${userId}/role`, {\n        method: 'PUT',\n        headers: this.getAuthHeaders(),\n        body: JSON.stringify({\n          role: newRole\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('AdminService: Successfully updated user role:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error updating user role:', error);\n      throw error;\n    }\n  }\n\n  // Fallback to localStorage if backend is not available\n  async getUsersFromFallback() {\n    console.log('AdminService: Using localStorage fallback for users...');\n    const allUsers = JSON.parse(localStorage.getItem('allUsers') || '[]');\n    return allUsers;\n  }\n}\nexport default new AdminService();","map":{"version":3,"names":["AdminService","constructor","baseURL","productsURL","getAuthHeaders","token","localStorage","getItem","getAllUsers","console","log","response","fetch","method","headers","ok","bodyText","text","e","msg","status","statusText","err","Error","data","json","error","getAllVendors","getDashboardStats","getAllProducts","deleteUser","userId","updateUserRole","newRole","body","JSON","stringify","role","getUsersFromFallback","allUsers","parse"],"sources":["D:/MealBasketSyatem/react-frontend/src/services/adminService.js"],"sourcesContent":["// Admin Service for backend API integration\nclass AdminService {\n  constructor() {\n    this.baseURL = 'http://localhost:8081/api/admin';\n    this.productsURL = 'http://localhost:8081/api/products';\n  }\n\n  // Get authentication headers\n  getAuthHeaders() {\n    const token = localStorage.getItem('token');\n    return {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    };\n  }\n\n  // Get all users and vendors from backend\n  async getAllUsers() {\n    try {\n      console.log('AdminService: Fetching all users from backend...');\n      const response = await fetch(`${this.baseURL}/users`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n\n      if (!response.ok) {\n        let bodyText = '';\n        try {\n          bodyText = await response.text();\n        } catch (e) {\n          bodyText = '';\n        }\n        const msg = `HTTP ${response.status} ${response.statusText}${bodyText ? ` - ${bodyText}` : ''}`;\n        const err = new Error(msg);\n        err.status = response.status;\n        throw err;\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched users:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching users:', error);\n      throw error;\n    }\n  }\n\n  // Get all vendors specifically\n  async getAllVendors() {\n    try {\n      console.log('AdminService: Fetching all vendors from backend...');\n      const response = await fetch(`${this.baseURL}/vendors`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n\n      if (!response.ok) {\n        let bodyText = '';\n        try {\n          bodyText = await response.text();\n        } catch (e) {\n          bodyText = '';\n        }\n        const msg = `HTTP ${response.status} ${response.statusText}${bodyText ? ` - ${bodyText}` : ''}`;\n        const err = new Error(msg);\n        err.status = response.status;\n        throw err;\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched vendors:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching vendors:', error);\n      throw error;\n    }\n  }\n\n  // Get dashboard statistics\n  async getDashboardStats() {\n    try {\n      console.log('AdminService: Fetching dashboard stats from backend...');\n      const response = await fetch(`${this.baseURL}/stats`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched stats:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching stats:', error);\n      throw error;\n    }\n  }\n\n  // Get all products from all vendors\n  async getAllProducts() {\n    try {\n      console.log('AdminService: Fetching all products from backend...');\n      const response = await fetch(`${this.productsURL}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully fetched products:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error fetching products:', error);\n      throw error;\n    }\n  }\n\n  // Delete a user\n  async deleteUser(userId) {\n    try {\n      console.log('AdminService: Deleting user:', userId);\n      const response = await fetch(`${this.baseURL}/users/${userId}`, {\n        method: 'DELETE',\n        headers: this.getAuthHeaders()\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully deleted user:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error deleting user:', error);\n      throw error;\n    }\n  }\n\n  // Update user role\n  async updateUserRole(userId, newRole) {\n    try {\n      console.log('AdminService: Updating user role:', userId, newRole);\n      const response = await fetch(`${this.baseURL}/users/${userId}/role`, {\n        method: 'PUT',\n        headers: this.getAuthHeaders(),\n        body: JSON.stringify({ role: newRole })\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log('AdminService: Successfully updated user role:', data);\n      return data;\n    } catch (error) {\n      console.error('AdminService: Error updating user role:', error);\n      throw error;\n    }\n  }\n\n  // Fallback to localStorage if backend is not available\n  async getUsersFromFallback() {\n    console.log('AdminService: Using localStorage fallback for users...');\n    const allUsers = JSON.parse(localStorage.getItem('allUsers') || '[]');\n    return allUsers;\n  }\n}\n\nexport default new AdminService();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}